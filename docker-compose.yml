services:
  redis:
    image: docker.io/redis:latest
    container_name: redis
    ports:
      - 6379:6379

  livekit:
    image: livekit/livekit-server:latest
    container_name: livekit
    ports:
      - 7880:7880
      - 7881:7881
    environment:
      - "LIVEKIT_KEYS=devkey: secret"
      - LIVEKIT_REDIS_ADDRESS=redis:6379

  agent:
    image: livekit/transcription-agent-test:latest
    container_name: agent
    environment:
      - LIVEKIT_URL=ws://livekit:7880
      - LIVEKIT_API_KEY=devkey
      - LIVEKIT_API_SECRET=secret
      - STT_PROVIDER=aws
      - AWS_ACCESS_KEY_ID=<your_aws_access_key_id>
      - AWS_SECRET_ACCESS_KEY=<your_aws_secret_access_key>
      - AWS_DEFAULT_REGION=<your_aws_region>
      - AZURE_SPEECH_KEY=
      - AZURE_SPEECH_REGION=
      - AZURE_SPEECH_HOST=
      - GOOGLE_APPLICATION_CREDENTIALS=
